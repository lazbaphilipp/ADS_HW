; Top Design: "HW_lib:Main:schematic"
; Netlisted using Hierarchy Policy: "Standard"

Options ResourceUsage=yes UseNutmegFormat=no EnableOptim=no TopDesignName="HW_lib:Main:schematic" DcopOutputNodeVoltages=yes DcopOutputPinCurrents=yes DcopOutputAllSweepPoints=no DcopOutputDcopType=0
; Library Name: HW_lib
; Cell Name: PMA_Adap_in
; View Name: emModel
define PMA_Adap_in ( P1  P2  P3  Ref=0 ) 
;parameters 
; MomCmpt model has node 0 as implicit reference. Ref node will be ignored and assumed to be grounded!
em_data_name="HW_lib:PMA_Adap_in:emModel"
MomCmpt:em_data  P1 P2 P3 \
    name=em_data_name \
    paramFile="" \
    modelFile="H:/ADS_HW/HW_wrk/HW_lib/%P%M%A_%Adap_in/em%Model/model.ndx" \
    ModelReuse=1 \
    ModelType="MOMMW" \
    ExtrapolationMode="linear" \
    EnforcePassivity=-1
end PMA_Adap_in

; Library Name: HW_lib
; Cell Name: PMA_Adap_out
; View Name: emModel
define PMA_Adap_out ( P1  P2  P3  Ref=0 ) 
;parameters 
; MomCmpt model has node 0 as implicit reference. Ref node will be ignored and assumed to be grounded!
em_data_name="HW_lib:PMA_Adap_out:emModel"
MomCmpt:em_data  P1 P2 P3 \
    name=em_data_name \
    paramFile="" \
    modelFile="H:/ADS_HW/HW_wrk/HW_lib/%P%M%A_%Adap_out/em%Model/model.ndx" \
    ModelReuse=1 \
    ModelType="MOMMW" \
    ExtrapolationMode="linear" \
    EnforcePassivity=-1
end PMA_Adap_out

; Library Name: HW_lib
; Cell Name: CLC_EMI
; View Name: emModel
define CLC_EMI ( P1  P2  P3  P4  Ref=0 ) 
parameters  W50=1.1 mm  Mit=0.2  Lfeed=1.25 mm  CoupledW=1.1 mm  CoupledS=6 mm  CoupledL=5.27 mm 
; MomCmpt model has node 0 as implicit reference. Ref node will be ignored and assumed to be grounded!
em_data_name="HW_lib:CLC_EMI:emModel"
em_data_p0="W50"
em_data_v0=W50
em_data_p1="Mit"
em_data_v1=Mit
em_data_p2="Lfeed"
em_data_v2=Lfeed
em_data_p3="CoupledW"
em_data_v3=CoupledW
em_data_p4="CoupledS"
em_data_v4=CoupledS
em_data_p5="CoupledL"
em_data_v5=CoupledL
MomCmpt:em_data  P1 P2 P3 P4 \
    name=em_data_name \
    paramFile="" \
    modelFile="H:/ADS_HW/HW_wrk/HW_lib/%C%L%C_%E%M%I/em%Model/model.ndx" \
    p0="W50" v0=W50 v0_Resolution=0.0001 mm \
    p1="Mit" v1=Mit v1_Resolution=1e-05 \
    p2="Lfeed" v2=Lfeed v2_Resolution=0.0001 mm \
    p3="CoupledW" v3=CoupledW v3_Resolution=0.0001 mm \
    p4="CoupledS" v4=CoupledS v4_Resolution=0.0001 mm \
    p5="CoupledL" v5=CoupledL v5_Resolution=0.0001 mm \
    ModelReuse=1 \
    ModelType="MOMMW" \
    ExtrapolationMode="linear" \
    EnforcePassivity=-1
end CLC_EMI

; Library Name: HW_lib
; Cell Name: Filter
; View Name: schematic
define Filter ( P1  P2 ) 
;parameters 
#uselib "ckt" , "S2P"
S2P:SNP1  P1 P2 0 File="H:\ADS_HW\HW_wrk\data\Components\MFliter_8.5GHz_Mom_MFilter_0.5GW.s2p" Type="touchstone" InterpMode="linear" InterpDom="" ExtrapMode="constant" Temp=27.0 CheckPassivity=0 
end Filter

; Library Name: HW_lib
; Cell Name: MainAdap
; View Name: emModel
define MainAdap ( P1  P2  P3  Ref=0 ) 
;parameters 
; MomCmpt model has node 0 as implicit reference. Ref node will be ignored and assumed to be grounded!
em_data_name="HW_lib:MainAdap:emModel"
MomCmpt:em_data  P1 P2 P3 \
    name=em_data_name \
    paramFile="" \
    modelFile="H:/ADS_HW/HW_wrk/HW_lib/%Main%Adap/em%Model/model.ndx" \
    ModelReuse=1 \
    ModelType="MOMMW" \
    ExtrapolationMode="linear" \
    EnforcePassivity=-1
end MainAdap

; Library Name: HW_lib
; Cell Name: PMA-183PLN
; View Name: schematic
define "PMA-183PLN" ( P1  P2 ) 
;parameters 
#uselib "sml" , "Amplifier2"
Amplifier2:AMP1  N__1 N__10 S21=file{DAC_PMA183PLN, "S[2,1]"} S11=file{DAC_PMA183PLN,"S[1,1]"} S22=file{DAC_PMA183PLN,"S[2,2]"} S12=file{DAC_PMA183PLN,"S[1,2]"} GainCompType=0 GainCompFreq=RF_center ReferToInput=0 TOI=22 _dBm GainCompSat=5.0 dB GainCompPower=9 _dBm GainComp=1.0 dB ClipDataFile=1 
#uselib "ckt" , "DAC"
DAC:DAC_PMA183PLN  File="H:\ADS_HW\HW_wrk\data\Components\PMA-183PLN+_S2P\PMA-183PLN+_2.6V_Plus25DegC_TB1.s2p" Type="touchstone" InterpMode="linear" InterpDom="ma" ExtrapMode="interpMode" iVar1="freq" iVal1=freq 
model MSub1 MSUB H=0.508 mm Er=3.55  Mur=1 Cond=1.0E+50 Hu=1e+33 mm T=17 um TanD=0.002  Rough=0 mm DielectricLossModel=1 FreqForEpsrTanD=1.0 GHz LowFreqForTanD=1.0 kHz HighFreqForTanD=1.0 THz RoughnessModel=2 
aele VSWR1=vswr(S11);VSWR2=vswr(S22);
aele StabFact1=stab_fact(S);

RF_center=8.5 GHz
W50=1.1 mm

LenOut=0.2 mm
Wout=0.3 mm
Ladapout=(1.4-0.3) mm
Wadapout=(0.7+0.1) mm
LTransOut=1 mm
WTransOut=1.1 mm
LTrailOut=(1.5+0.0) mm
WTrailOut=(1.1+0.0) mm
LaddOut=(0.6-0.1) mm
PMA_Adap_in:X1  P1 N__5 N__1 

LenIn=0.2 mm
Win=0.3 mm
Ladapin=(0.5+0.1) mm
Wadapin=(0.7) mm
Ltrans=(2+0.1) mm
Wtrans=(1.1+0.3) mm
Ltrail=(1+0) mm
Wtrail=(1.1-0.1) mm
Laddin=(1.3+0.0) mm
PMA_Adap_out:X2  N__10 N__11 P2 
end "PMA-183PLN"

"PMA-183PLN":LNA1  N__1 N__0 
Filter:"8GF"  N__0 N__9 
Port:TermG1  N__1 0 Num=1 Z=50 Ohm Noise=yes 
CLC_EMI:X1  N__10 N__12 N__5 N__3 W50=1.1 mm Mit=0.2 Lfeed=1.25 mm CoupledW=1.1 mm CoupledS=6 mm CoupledL=5.27 mm 
"PMA-183PLN":LNA2  N__9 N__10 
Port:TermG2  N__13 0 Num=2 Z=50 Ohm Noise=yes 
Port:TermG3  N__3 0 Num=3 Z=50 Ohm Noise=yes 
Port:TermG4  N__5 0 Num=4 Z=50 Ohm Noise=yes 
S_Param:SP1 CalcS=yes CalcY=no CalcZ=no GroupDelayAperture=1e-4 FreqConversion=no FreqConversionPort=1 StatusLevel=2 CalcNoise=no SortNoise=0 BandwidthForNoise=1.0 Hz DevOpPtLevel=0 \
SweepVar="freq" SweepPlan="SP1_stim" OutputPlan="SP1_Output" 

SweepPlan: SP1_stim Start=7 GHz Stop=10.0 GHz Step=0.01 GHz 

OutputPlan:SP1_Output \
      Type="Output" \
      UseEquationNestLevel=yes \
      EquationNestLevel=2 \
      UseSavedEquationNestLevel=yes \
      SavedEquationNestLevel=2

#load "python","LinearCollapse"
Component Module="LinearCollapse" Type="ModelExtractor" NetworkRepresentation=2
model MSub1 MSUB H=0.508 mm Er=3.55  Mur=1  Cond=1.0E+50  Hu=1e+33 mm T=17 um TanD=0.002  Rough=0 mm DielectricLossModel=1 FreqForEpsrTanD=1.0 GHz LowFreqForTanD=1.0 kHz HighFreqForTanD=1.0 THz RoughnessModel=2 
MainAdap:X2  N__12 N__4 N__13 
